---
import DashboardLayout from "../../../../layouts/DashboardLayout.astro";

// Campaign history data interface
interface Campaign {
    id: string;
    type: string;
    platform: string;
    name: string;
    target: number;
    progress: number;
    status: "active" | "completed" | "pending";
    date: string;
}

// Mock History Data
const history: Campaign[] = [
    {
        id: "CMP-001",
        type: "Social Booster",
        platform: "Instagram",
        name: "Like Foto Produk",
        target: 1000,
        progress: 850,
        status: "active",
        date: "01 Feb 2026",
    },
    {
        id: "CMP-002",
        type: "Clipper",
        platform: "Web",
        name: "Kunjungi Website",
        target: 500,
        progress: 500,
        status: "completed",
        date: "28 Jan 2026",
    },
    {
        id: "CMP-003",
        type: "Social Booster",
        platform: "TikTok",
        name: "Follow Akun",
        target: 2000,
        progress: 120,
        status: "active",
        date: "02 Feb 2026",
    },
    {
        id: "CMP-004",
        type: "Social Booster",
        platform: "Twitter",
        name: "Retweet Promo",
        target: 500,
        progress: 0,
        status: "pending",
        date: "03 Feb 2026",
    },
];
---

<DashboardLayout title="Riwayat Campaign">
    <!-- BEGIN: Hero Section -->
    <section class="mb-4 md:mb-8">
        <div
            class="flex flex-col md:flex-row md:items-end justify-between gap-4"
        >
            <div>
                <h1
                    class="text-2xl md:text-4xl font-bold text-gray-800 mb-1 md:mb-2"
                >
                    Riwayat Campaign
                </h1>
                <p class="text-gray-400 font-light text-base md:text-lg">
                    Monitor performa campaign yang telah Anda buat.
                </p>
            </div>
            <div class="flex gap-2">
                <a
                    href="/dashboard/advertiser/campaign/social"
                    class="px-4 py-2.5 bg-[#ff6b6b] text-white rounded-xl font-bold text-sm hover:bg-[#e55a5a] transition-colors shadow-sm flex items-center gap-2"
                >
                    <i class="fa-solid fa-plus"></i> Social
                </a>
            </div>
        </div>
    </section>
    <!-- END: Hero Section -->

    <!-- BEGIN: Table Card -->
    <div class="soft-card p-4 md:p-6">
        <div class="overflow-x-auto">
            <table class="w-full min-w-[600px] text-left border-collapse">
                <thead>
                    <tr
                        class="text-[10px] text-gray-400 uppercase tracking-wider border-b border-gray-100"
                    >
                        <th class="pb-3 font-medium">Campaign Info</th>
                        <th class="pb-3 font-medium">Progress</th>
                        <th class="pb-3 font-medium">Target</th>
                        <th class="pb-3 font-medium text-right">Status</th>
                    </tr>
                </thead>
                <tbody class="text-sm">
                    {
                        history.map((item) => (
                            <tr class="group hover:bg-gray-50 transition-colors">
                                <td class="py-4 pr-4">
                                    <div>
                                        <span class="text-[10px] font-bold text-gray-400 block mb-0.5">
                                            {item.id} â€¢ {item.date}
                                        </span>
                                        <h4 class="text-sm font-bold text-gray-800">
                                            {item.name}
                                        </h4>
                                        <span class="inline-flex items-center gap-1 text-[10px] font-medium text-gray-500 bg-gray-100 px-1.5 py-0.5 rounded mt-1">
                                            {item.type} - {item.platform}
                                        </span>
                                    </div>
                                </td>
                                <td class="py-4 pr-4 align-middle">
                                    <div class="w-full max-w-[120px]">
                                        <div class="flex justify-between text-[10px] font-bold mb-1">
                                            <span class="text-gray-800">
                                                {item.progress}
                                            </span>
                                            <span class="text-gray-400">
                                                {Math.round(
                                                    (item.progress /
                                                        item.target) *
                                                        100,
                                                )}
                                                %
                                            </span>
                                        </div>
                                        <div class="h-1.5 w-full bg-gray-100 rounded-full overflow-hidden">
                                            <div
                                                class="h-full bg-[#ff6b6b] rounded-full transition-all duration-500"
                                                style={`width: ${(item.progress / item.target) * 100}%`}
                                            />
                                        </div>
                                    </div>
                                </td>
                                <td class="py-4 text-sm font-bold text-gray-600">
                                    {item.target} User
                                </td>
                                <td class="py-4 text-right">
                                    {item.status === "active" && (
                                        <span class="px-3 py-1 rounded-full text-[10px] font-bold bg-emerald-50 text-emerald-500">
                                            <span class="inline-block w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1" />{" "}
                                            Berjalan
                                        </span>
                                    )}
                                    {item.status === "completed" && (
                                        <span class="px-3 py-1 rounded-full text-[10px] font-bold bg-blue-50 text-blue-500">
                                            <span class="inline-block w-1.5 h-1.5 bg-blue-500 rounded-full mr-1" />{" "}
                                            Selesai
                                        </span>
                                    )}
                                    {item.status === "pending" && (
                                        <span class="px-3 py-1 rounded-full text-[10px] font-bold bg-amber-50 text-amber-500">
                                            <span class="inline-block w-1.5 h-1.5 bg-amber-500 rounded-full mr-1" />{" "}
                                            Pending
                                        </span>
                                    )}
                                </td>
                            </tr>
                        ))
                    }
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div
            class="flex items-center justify-between mt-6 pt-6 border-t border-gray-100"
        >
            <span class="text-xs font-bold text-gray-400">1-4 dari 4</span>
            <div class="flex gap-2">
                <button
                    disabled
                    class="px-3 py-1.5 rounded-lg border border-gray-200 text-gray-400 font-bold text-xs cursor-not-allowed"
                    >Prev</button
                >
                <button
                    disabled
                    class="px-3 py-1.5 rounded-lg border border-gray-200 text-gray-400 font-bold text-xs cursor-not-allowed"
                    >Next</button
                >
            </div>
        </div>
    </div>
    <!-- END: Table Card -->
</DashboardLayout>
