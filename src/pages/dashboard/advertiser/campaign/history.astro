---
import DashboardLayout from "../../../../layouts/DashboardLayout.astro";

// Mock History Data
const history = [
    {
        id: "CMP-001",
        type: "Social Booster",
        platform: "Instagram",
        name: "Like Foto Produk",
        target: 1000,
        progress: 850,
        status: "active",
        date: "01 Feb 2026",
    },
    {
        id: "CMP-002",
        type: "Clipper",
        platform: "Web",
        name: "Kunjungi Website",
        target: 500,
        progress: 500,
        status: "completed",
        date: "28 Jan 2026",
    },
    {
        id: "CMP-003",
        type: "Social Booster",
        platform: "TikTok",
        name: "Follow Akun",
        target: 2000,
        progress: 120,
        status: "active",
        date: "02 Feb 2026",
    },
    {
        id: "CMP-004",
        type: "Social Booster",
        platform: "Twitter",
        name: "Retweet Promo",
        target: 500,
        progress: 0,
        status: "pending",
        date: "03 Feb 2026",
    },
];
---

<DashboardLayout title="Riwayat Campaign">
    <!-- Header -->
    <div
        class="mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4"
    >
        <div>
            <h1 class="text-2xl font-bold text-white tracking-tight">
                Riwayat Campaign
            </h1>
            <p class="text-gray-400 mt-1 text-sm">
                Monitor performa campaign yang telah Anda buat.
            </p>
        </div>
        <div class="flex gap-2">
            <a
                href="/dashboard/advertiser/campaign/social"
                class="px-4 py-2 bg-[#D4F24F] text-[#0C1A18] rounded-xl font-bold text-sm hover:bg-[#c3e33b] transition-colors"
            >
                + Social
            </a>
            <a
                href="/dashboard/advertiser/campaign/clipper"
                class="px-4 py-2 bg-white text-[#0C1A18] rounded-xl font-bold text-sm hover:bg-gray-100 transition-colors"
            >
                + Clipper
            </a>
        </div>
    </div>

    <!-- Table Card -->
    <div
        class="bg-white rounded-[2rem] p-6 md:p-8 border border-gray-200 shadow-sm overflow-hidden"
    >
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead>
                    <tr class="text-left border-b border-gray-100">
                        <th
                            class="pb-4 text-xs font-bold text-gray-400 uppercase tracking-wider"
                            >Campaign Info</th
                        >
                        <th
                            class="pb-4 text-xs font-bold text-gray-400 uppercase tracking-wider"
                            >Progress</th
                        >
                        <th
                            class="pb-4 text-xs font-bold text-gray-400 uppercase tracking-wider"
                            >Target</th
                        >
                        <th
                            class="pb-4 text-xs font-bold text-gray-400 uppercase tracking-wider text-right"
                            >Status</th
                        >
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-50">
                    {
                        history.map((item) => (
                            <tr class="group hover:bg-gray-50/50 transition-colors">
                                <td class="py-4 pr-4">
                                    <div>
                                        <span class="text-[10px] font-bold text-gray-400 block mb-0.5">
                                            {item.id} â€¢ {item.date}
                                        </span>
                                        <h4 class="text-sm font-bold text-[#0C1A18]">
                                            {item.name}
                                        </h4>
                                        <span class="inline-flex items-center gap-1 text-[10px] font-medium text-gray-500 bg-gray-100 px-1.5 py-0.5 rounded mt-1">
                                            {item.type} - {item.platform}
                                        </span>
                                    </div>
                                </td>
                                <td class="py-4 pr-4 align-middle">
                                    <div class="w-full max-w-[120px]">
                                        <div class="flex justify-between text-[10px] font-bold mb-1">
                                            <span class="text-[#0C1A18]">
                                                {item.progress}
                                            </span>
                                            <span class="text-gray-400">
                                                {Math.round(
                                                    (item.progress /
                                                        item.target) *
                                                        100,
                                                )}
                                                %
                                            </span>
                                        </div>
                                        <div class="h-1.5 w-full bg-gray-100 rounded-full overflow-hidden">
                                            <div
                                                class="h-full bg-[#0C1A18] rounded-full transition-all duration-500"
                                                style={`width: ${(item.progress / item.target) * 100}%`}
                                            />
                                        </div>
                                    </div>
                                </td>
                                <td class="py-4 text-sm font-bold text-gray-600">
                                    {item.target} User
                                </td>
                                <td class="py-4 text-right">
                                    {item.status === "active" && (
                                        <span class="px-2 py-1 rounded-lg bg-emerald-50 text-emerald-600 text-[10px] font-bold border border-emerald-100">
                                            Berjalan
                                        </span>
                                    )}
                                    {item.status === "completed" && (
                                        <span class="px-2 py-1 rounded-lg bg-blue-50 text-blue-600 text-[10px] font-bold border border-blue-100">
                                            Selesai
                                        </span>
                                    )}
                                    {item.status === "pending" && (
                                        <span class="px-2 py-1 rounded-lg bg-amber-50 text-amber-600 text-[10px] font-bold border border-amber-100">
                                            Pending
                                        </span>
                                    )}
                                </td>
                            </tr>
                        ))
                    }
                </tbody>
            </table>
        </div>
    </div>
</DashboardLayout>
