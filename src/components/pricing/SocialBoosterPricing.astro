---
/**
 * Social Booster Pricing Component
 * Grid of social media boosting services
 * @version Astro 5.17 compatible
 */

interface Service {
    title: string;
    price: string;
    unit: string;
    platforms: string[];
}

interface PlatformIcon {
    type: "fa" | "img";
    value: string;
    hoverColor?: string;
}

const services: Service[] = [
    {
        title: "Boost Komen",
        price: "1.500",
        unit: "/ komen",
        platforms: ["youtube", "facebook", "instagram", "tiktok", "x", "web"],
    },
    {
        title: "Boost View",
        price: "300",
        unit: "/ view",
        platforms: ["youtube", "instagram", "tiktok"],
    },
    {
        title: "Boost Video Live",
        price: "900",
        unit: "/ live",
        platforms: ["youtube"],
    },
    {
        title: "Boost Rating & Review",
        price: "1.500",
        unit: "/ rating",
        platforms: ["gmaps"],
    },
    {
        title: "Download, Rating & Review",
        price: "3.500",
        unit: "/ download",
        platforms: ["playstore"],
    },
    {
        title: "Boost Subs / Followers",
        price: "550",
        unit: "/ subs",
        platforms: ["youtube", "instagram", "x", "threads", "whatsapp"],
    },
    {
        title: "Jasa Survey",
        price: "2.500",
        unit: "/ survey",
        platforms: ["survey"],
    },
    {
        title: "Jasa Registrasi",
        price: "4.500",
        unit: "/ registrasi",
        platforms: ["apple", "playstore", "web"],
    },
    {
        title: "Kampanye Posting",
        price: "1.500",
        unit: "/ kampanye",
        platforms: ["facebook", "instagram", "x", "tiktok", "youtube"],
    },
    {
        title: "Jasa Share / Retweet",
        price: "1.000",
        unit: "/ share",
        platforms: ["tiktok", "x", "instagram", "facebook"],
    },
    {
        title: "Marketplace Followers",
        price: "250",
        unit: "/ follow",
        platforms: ["shopee", "tokopedia"],
    },
    {
        title: "Trending X",
        price: "800",
        unit: "/ twit",
        platforms: ["x"],
    },
    {
        title: "Marketplace Whitelist",
        price: "250",
        unit: "/ whitelist",
        platforms: ["shopee", "tokopedia"],
    },
];

const platformIcons: Record<string, PlatformIcon> = {
    youtube: { type: "fa", value: "fa-brands fa-youtube", hoverColor: "group-hover/icon:text-red-600" },
    facebook: { type: "fa", value: "fa-brands fa-facebook", hoverColor: "group-hover/icon:text-blue-600" },
    instagram: { type: "fa", value: "fa-brands fa-instagram", hoverColor: "group-hover/icon:text-pink-600" },
    x: { type: "fa", value: "fa-brands fa-x-twitter", hoverColor: "group-hover/icon:text-black" },
    whatsapp: { type: "fa", value: "fa-brands fa-whatsapp", hoverColor: "group-hover/icon:text-green-500" },
    gmaps: { type: "fa", value: "fa-solid fa-location-dot", hoverColor: "group-hover/icon:text-blue-500" },
    playstore: { type: "fa", value: "fa-brands fa-google-play", hoverColor: "group-hover/icon:text-teal-600" },
    survey: { type: "fa", value: "fa-solid fa-clipboard-list", hoverColor: "group-hover/icon:text-indigo-600" },
    web: { type: "fa", value: "fa-solid fa-globe", hoverColor: "group-hover/icon:text-gray-800" },
    apple: { type: "fa", value: "fa-brands fa-apple", hoverColor: "group-hover/icon:text-gray-800" },
    tiktok: { type: "img", value: "https://img.icons8.com/?size=100&id=118638&format=png&color=000000" },
    threads: { type: "img", value: "https://img.icons8.com/?size=100&id=AS2a6aA9BwK3&format=png&color=000000" },
    shopee: { type: "img", value: "https://img.icons8.com/?size=100&id=YyHWR7RLwxso&format=png&color=000000" },
    tokopedia: { type: "img", value: "https://img.icons8.com/?size=100&id=QxTCUohbBw9U&format=png&color=000000" },
};

function getIconClass(platform: string): string {
    const icon = platformIcons[platform];
    if (!icon || icon.type !== "fa") return "";
    return `${icon.value} ${icon.hoverColor || ""}`;
}

function getIconImg(platform: string): string | null {
    const icon = platformIcons[platform];
    if (!icon || icon.type !== "img") return null;
    return icon.value;
}
---

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    {services.map((service) => (
        <div class="group relative bg-white rounded-2xl p-6 hover:-translate-y-1 transition-all duration-300 border border-gray-100 shadow-sm hover:shadow-xl">
            <div class="flex flex-col h-full justify-between">
                <div>
                    <!-- Platform Icons Row -->
                    <div class="flex flex-wrap gap-2 mb-4 h-6 text-gray-400 grayscale group-hover:grayscale-0 group-hover:text-gray-800 transition-all duration-300">
                        {service.platforms.map((platform) => {
                            const imgSrc = getIconImg(platform);
                            const iconClass = getIconClass(platform);
                            return imgSrc ? (
                                <img 
                                    src={imgSrc} 
                                    alt={platform} 
                                    class="w-5 h-5 opacity-40 grayscale group-hover:grayscale-0 group-hover:opacity-100 transition-all"
                                    title={platform}
                                />
                            ) : (
                                <div class="group/icon" title={platform}>
                                    <i class={`w-5 h-5 ${iconClass} transition-colors`}></i>
                                </div>
                            );
                        })}
                    </div>

                    <div class="flex items-center gap-3 mb-2">
                        <h3 class="text-lg font-bold text-gray-700 group-hover:text-gray-900 leading-tight transition-colors">
                            {service.title}
                        </h3>
                    </div>
                </div>

                <div class="mt-4 pt-4 border-t border-gray-100/50 group-hover:border-gray-100 transition-colors">
                    <div class="flex items-baseline gap-1">
                        <span class="text-sm font-bold text-gray-400 group-hover:text-gray-500 transition-colors">Rp</span>
                        <span class="text-3xl font-bold text-gray-800 group-hover:text-[#f97316] transition-colors">
                            {service.price}
                        </span>
                    </div>
                    <span class="text-sm text-gray-400 font-medium">
                        {service.unit}
                    </span>
                </div>
            </div>
        </div>
    ))}
</div>
